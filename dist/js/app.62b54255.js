(function(e){function t(t){for(var r,i,s=t[0],l=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],n[i]&&f.push(n[i][0]),n[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);u&&u(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=a[0]))}return e}var r={},n={app:0},o=[];function i(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=r,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(a,r,function(t){return e[t]}.bind(null,r));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"266a":function(e,t,a){"use strict";var r=a("f270"),n=a.n(r);n.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("form",{staticStyle:{display:"flex","flex-direction":"column","align-items":"stretch",margin:"0 auto",width:"50%"},attrs:{autocomplete:"off",novalidate:""},on:{submit:function(e){e.preventDefault()}}},[a("label",{attrs:{for:"departure_code"}},[e._v("departure_code")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.departure_code,expression:"departure_code"}],attrs:{type:"text",name:"departure_code",id:"departure_code"},domProps:{value:e.departure_code},on:{input:function(t){t.target.composing||(e.departure_code=t.target.value)}}}),a("label",{attrs:{for:"arrival_code"}},[e._v("arrival_code")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.arrival_code,expression:"arrival_code"}],attrs:{type:"text",name:"arrival_code",id:"arrival_code"},domProps:{value:e.arrival_code},on:{input:function(t){t.target.composing||(e.arrival_code=t.target.value)}}}),a("label",{attrs:{for:"date"}},[e._v("date")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.date,expression:"date"}],attrs:{type:"date",name:"date",id:"date"},domProps:{value:e.date},on:{input:function(t){t.target.composing||(e.date=t.target.value)}}}),a("label",{attrs:{for:"class"}},[e._v("class")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.class_,expression:"class_"}],attrs:{type:"text",name:"class",id:"class"},domProps:{value:e.class_},on:{input:function(t){t.target.composing||(e.class_=t.target.value)}}}),a("label",{attrs:{for:"adult_qnt"}},[e._v("adult_qnt")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.adult_qnt,expression:"adult_qnt"}],attrs:{type:"text",name:"adult_qnt",id:"adult_qnt"},domProps:{value:e.adult_qnt},on:{input:function(t){t.target.composing||(e.adult_qnt=t.target.value)}}}),this.authApp.etm_auth_key?a("button",{on:{click:function(t){e.postInitSearch()}}},[e._v("getInitSearch")]):e._e()]),a("Offers",{attrs:{"display-details":e.displayDetails,display_details:e.display_details,offers:e.offers}})],1)},o=[],i=a("bc3a"),s=a.n(i),l="https://api-stage.etm-system.com/api",c="https://api-stage.etm-system.com/api/air",u=s.a.create({baseURL:"".concat(c)}),d="c6744783c6",f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",e._l(e.offers.offers,function(t,r){return a("li",{key:r,on:{click:e.displayDetails}},[a("img",{attrs:{src:t.carrier_logo,alt:"carrier logo",width:"100"}}),a("span",[e._v(e._s(t.carrier_name))]),a("detailOffer",{style:{display:e.display_details},attrs:{offer:t}})],1)}))},p=[],_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",e._l(e.offer.offers,function(t,r){return a("li",{key:r,staticClass:"detail"},[a("ul",e._l(t.segments,function(t,r){return a("li",{key:r},[a("ul",[e._l(t.flights_info,function(t,r){return a("ul",{key:r},[a("li",[e._v("date departure: "+e._s(t.departure_date))]),a("li",[e._v("date arrival: "+e._s(t.arrival_date))]),a("li",[e._v("departure airport: "+e._s(t.departure_airport))]),a("li",[e._v("arrival airport: "+e._s(t.arrival_airport))]),a("li",[e._v("duration: "+e._s(t.duration_formated))])])}),a("li",[e._v("price: "+e._s(t.price))])],2)])}))])}))},v=[];function m(e){return e<10&&(e="0".concat(e)),e}var h={name:"detailOffer",props:{offer:{}},data:function(){return{}},methods:{calcDateArrival:function(e,t,a,r){var n=new Date("".concat(e," ").concat(t," ").concat(a)),o=new Date(n.setMinutes(n.getMinutes()+r)),i=o.getFullYear(),s=m(o.getDate()),l=m(o.getMonth()+1);return"".concat(i,"-").concat(l,"-").concat(s)}}},g=h,y=(a("9f5a"),a("2877")),w=Object(y["a"])(g,_,v,!1,null,"5a32843a",null);w.options.__file="DetailOffer.vue";var b=w.exports,x={name:"Offers",components:{DetailOffer:b},props:{displayDetails:{},display_details:{},offers:{}}},O=x,k=(a("266a"),Object(y["a"])(O,f,p,!1,null,null,null));k.options.__file="Offers.vue";var q=k.exports;function P(e,t,a,r,n){this.adult_qnt=r,this.class=n,this.directions=[{departure_code:e,arrival_code:t,date:a}]}var j={name:"app",components:{Offers:q},data:function(){return{display_details:"none",authApp:{etm_auth_key:"string",locale:"string",currency:"string",max_expiry_time:0,max_timeout:0},departure_code:"",arrival_code:"",date:"",class_:"",adult_qnt:"",searchRequest:{},offers:{}}},mounted:function(){this.getTokenApp()},methods:{displayDetails:function(){this.display_details="none"===this.display_details?"block":"none"},getTokenApp:function(){var e=this;s.a.get("".concat(l,"/login/").concat(d)).then(function(t){window.console.log(t.data),e.authApp=t.data,u.defaults.headers.common["etm-auth-key"]="".concat(e.authApp.etm_auth_key)}).catch(function(e){window.console.log(e)})},postInitSearch:function(){var e=this,t=new P(this.departure_code,this.arrival_code,this.date,this.adult_qnt,this.class_);window.console.log(t),u.post("/search",t).then(function(t){window.console.log(t.data),e.searchRequest=t.data,e.getOffers()}).catch(function(e){window.console.log(e)})},getOffers:function(){var e=this;u.get("/offers/?request_id=".concat(this.searchRequest.request_id),{}).then(function(t){if(window.console.log(t),"InProcess"===t.data.status){window.console.log("InProgress");var a=setTimeout(e.getOffers(),1e3);clearTimeout(a)}else e.offers=t.data}).catch(function(e){window.console.log(e)})}}},D=j,S=Object(y["a"])(D,n,o,!1,null,null,null);S.options.__file="App.vue";var A=S.exports;r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(A)}}).$mount("#app")},"9f5a":function(e,t,a){"use strict";var r=a("fce7"),n=a.n(r);n.a},f270:function(e,t,a){},fce7:function(e,t,a){}});